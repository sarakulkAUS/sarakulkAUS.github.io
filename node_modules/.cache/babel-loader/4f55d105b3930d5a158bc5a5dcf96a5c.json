{"ast":null,"code":"/*\r\nCopyright 2022 Adobe\r\nAll Rights Reserved.\r\n\r\nNOTICE: Adobe permits you to use, modify, and distribute this file in\r\naccordance with the terms of the Adobe license agreement accompanying\r\nit.\r\n*/\n// Use the AEM Headless SDK to make the GraphQL requests\nconst {\n  AEMHeadless\n} = require('@adobe/aem-headless-client-js'); // environment variable for configuring the headless client\n\n\nconst {\n  REACT_APP_HOST_URI,\n  REACT_APP_GRAPHQL_ENDPOINT,\n  REACT_APP_USE_PROXY,\n  REACT_APP_AUTH_METHOD,\n  REACT_APP_DEV_TOKEN,\n  REACT_APP_BASIC_AUTH_USER,\n  REACT_APP_BASIC_AUTH_PASS\n} = process.env; // In a production application the serviceURL should be set to the production AEM Publish environment\n// In development the serviceURL can be set to '/' which will be a relative proxy is used (see ../authMethods.js) to avoid CORS issues\n\nconst serviceURL = REACT_APP_USE_PROXY === 'true' ? '/' : REACT_APP_HOST_URI; // Get authorization based on environment variables\n// authorization is not needed when connecting to Publish environments\n\nconst setAuthorization = function () {\n  if (REACT_APP_AUTH_METHOD === 'basic') {\n    return [REACT_APP_BASIC_AUTH_USER, REACT_APP_BASIC_AUTH_PASS];\n  } else if (REACT_APP_AUTH_METHOD === 'dev-token') {\n    return REACT_APP_DEV_TOKEN;\n  } else {\n    // no authentication set\n    return;\n  }\n};\n\nexport const aemHeadlessClient = new AEMHeadless({\n  serviceURL: serviceURL,\n  endpoint: REACT_APP_GRAPHQL_ENDPOINT,\n  auth: setAuthorization()\n});\n/**\r\n * concatenate error messages into a single string.\r\n * @param {*} errors\r\n */\n\nexport const mapErrors = function (errors) {\n  return errors.map(error => error.message).join(\",\");\n};","map":{"version":3,"names":["AEMHeadless","require","REACT_APP_HOST_URI","REACT_APP_GRAPHQL_ENDPOINT","REACT_APP_USE_PROXY","REACT_APP_AUTH_METHOD","REACT_APP_DEV_TOKEN","REACT_APP_BASIC_AUTH_USER","REACT_APP_BASIC_AUTH_PASS","process","env","serviceURL","setAuthorization","aemHeadlessClient","endpoint","auth","mapErrors","errors","map","error","message","join"],"sources":["C:/sarang/code/spa/react-project/aem-guides-wknd-graphql/react-app/src/api/headlessClient.js"],"sourcesContent":["/*\r\nCopyright 2022 Adobe\r\nAll Rights Reserved.\r\n\r\nNOTICE: Adobe permits you to use, modify, and distribute this file in\r\naccordance with the terms of the Adobe license agreement accompanying\r\nit.\r\n*/\r\n\r\n// Use the AEM Headless SDK to make the GraphQL requests\r\nconst { AEMHeadless } = require('@adobe/aem-headless-client-js');\r\n\r\n// environment variable for configuring the headless client\r\nconst {\r\n    REACT_APP_HOST_URI,\r\n    REACT_APP_GRAPHQL_ENDPOINT,\r\n    REACT_APP_USE_PROXY,\r\n    REACT_APP_AUTH_METHOD,\r\n    REACT_APP_DEV_TOKEN,\r\n    REACT_APP_BASIC_AUTH_USER,\r\n    REACT_APP_BASIC_AUTH_PASS\r\n} = process.env;\r\n\r\n// In a production application the serviceURL should be set to the production AEM Publish environment\r\n// In development the serviceURL can be set to '/' which will be a relative proxy is used (see ../authMethods.js) to avoid CORS issues\r\nconst serviceURL = REACT_APP_USE_PROXY === 'true' ? '/' : REACT_APP_HOST_URI;\r\n\r\n// Get authorization based on environment variables\r\n// authorization is not needed when connecting to Publish environments\r\nconst setAuthorization = function () {\r\n    if (REACT_APP_AUTH_METHOD === 'basic') {\r\n        return [REACT_APP_BASIC_AUTH_USER, REACT_APP_BASIC_AUTH_PASS];\r\n    } else if (REACT_APP_AUTH_METHOD === 'dev-token') {\r\n        return REACT_APP_DEV_TOKEN;\r\n    } else {\r\n        // no authentication set\r\n        return;\r\n    }\r\n}\r\nexport const aemHeadlessClient = new AEMHeadless({\r\n    serviceURL: serviceURL,\r\n    endpoint: REACT_APP_GRAPHQL_ENDPOINT,\r\n    auth: setAuthorization()\r\n});\r\n\r\n/**\r\n * concatenate error messages into a single string.\r\n * @param {*} errors\r\n */\r\nexport const mapErrors = function (errors) {\r\n    return errors.map((error) => error.message).join(\",\");\r\n}"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA,MAAM;EAAEA;AAAF,IAAkBC,OAAO,CAAC,+BAAD,CAA/B,C,CAEA;;;AACA,MAAM;EACFC,kBADE;EAEFC,0BAFE;EAGFC,mBAHE;EAIFC,qBAJE;EAKFC,mBALE;EAMFC,yBANE;EAOFC;AAPE,IAQFC,OAAO,CAACC,GARZ,C,CAUA;AACA;;AACA,MAAMC,UAAU,GAAGP,mBAAmB,KAAK,MAAxB,GAAiC,GAAjC,GAAuCF,kBAA1D,C,CAEA;AACA;;AACA,MAAMU,gBAAgB,GAAG,YAAY;EACjC,IAAIP,qBAAqB,KAAK,OAA9B,EAAuC;IACnC,OAAO,CAACE,yBAAD,EAA4BC,yBAA5B,CAAP;EACH,CAFD,MAEO,IAAIH,qBAAqB,KAAK,WAA9B,EAA2C;IAC9C,OAAOC,mBAAP;EACH,CAFM,MAEA;IACH;IACA;EACH;AACJ,CATD;;AAUA,OAAO,MAAMO,iBAAiB,GAAG,IAAIb,WAAJ,CAAgB;EAC7CW,UAAU,EAAEA,UADiC;EAE7CG,QAAQ,EAAEX,0BAFmC;EAG7CY,IAAI,EAAEH,gBAAgB;AAHuB,CAAhB,CAA1B;AAMP;AACA;AACA;AACA;;AACA,OAAO,MAAMI,SAAS,GAAG,UAAUC,MAAV,EAAkB;EACvC,OAAOA,MAAM,CAACC,GAAP,CAAYC,KAAD,IAAWA,KAAK,CAACC,OAA5B,EAAqCC,IAArC,CAA0C,GAA1C,CAAP;AACH,CAFM"},"metadata":{},"sourceType":"module"}