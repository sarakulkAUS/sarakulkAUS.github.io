{"ast":null,"code":"import _slicedToArray from\"C:\\\\sarang\\\\code\\\\spa\\\\remote-spa-published\\\\sarakulkAUS.github.io\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";/*\r\nCopyright 2022 Adobe\r\nAll Rights Reserved.\r\n\r\nNOTICE: Adobe permits you to use, modify, and distribute this file in\r\naccordance with the terms of the Adobe license agreement accompanying\r\nit.\r\n*/import React,{useEffect,useState}from'react';import{Link,useLocation,useHistory}from\"react-router-dom\";import CurrencyFormat from'react-currency-format';import backIcon from\"../images/icon-close.svg\";import Error from'./Error';import Loading from'./Loading';import{mapJsonRichText}from'../utils/renderRichText';import'./AdventureDetail.scss';import{getAdventureByPath}from'../api/persistedQueries';import AEMResponsiveGrid from'./aem/AEMResponsiveGrid';var REACT_APP_PUBLIC_URI=process.env.REACT_APP_PUBLIC_URI;function AdventureDetail(){var location=useLocation();//parse the content fragment from the url location\nvar contentFragmentPath=location.pathname.substring(\"/adventure:\".length);// useHistory as react-router-dom is still on old version to avoid conflict with aem-core-components-react-XX upstream dependencies\nvar history=useHistory();var _useState=useState(),_useState2=_slicedToArray(_useState,2),response=_useState2[0],setResponse=_useState2[1];useEffect(function(){// set response to null on change\nsetResponse();// execute persisted query based on the adventure slug\ngetAdventureByPath(contentFragmentPath).then(function(response){return setResponse(response);});},[contentFragmentPath]);//If query response is null then return a loading icon...\nif(!response)return/*#__PURE__*/React.createElement(Loading,null);//If there is an error with the GraphQL query\nif(response&&response.errors)return/*#__PURE__*/React.createElement(Error,{errorMessage:response.errors});//Set adventure properties variable based on graphQL response\nvar currentAdventure=getAdventure(response);//Must have title, path, and image\nif(!currentAdventure){return/*#__PURE__*/React.createElement(NoAdventureFound,null);}return/*#__PURE__*/React.createElement(AdventureDetailRender,Object.assign({},currentAdventure,{history:history}));}function AdventureDetailRender(_ref){var _path=_ref._path,title=_ref.title,primaryImage=_ref.primaryImage,activity=_ref.activity,adventureType=_ref.adventureType,tripLength=_ref.tripLength,groupSize=_ref.groupSize,difficulty=_ref.difficulty,price=_ref.price,description=_ref.description,itinerary=_ref.itinerary,contributor=_ref.contributor,history=_ref.history;// Get the last segment of the Adventure Content Fragment path to used to generate the pagePath for the AEMResponsiveGrid\nvar adventureName=_path.split('/').pop();return/*#__PURE__*/React.createElement(\"div\",{className:\"adventure-detail\"},/*#__PURE__*/React.createElement(\"button\",{className:\"adventure-detail-close-button\",onClick:function onClick(){return history.goBack();}},/*#__PURE__*/React.createElement(\"img\",{className:\"Backbutton-icon\",src:REACT_APP_PUBLIC_URI+'/'+backIcon,alt:\"Return\"})),/*#__PURE__*/React.createElement(\"h1\",{className:\"adventure-detail-title\"},title),/*#__PURE__*/React.createElement(\"div\",{className:\"adventure-detail-info\"},/*#__PURE__*/React.createElement(\"div\",{className:\"adventure-detail-info-label\"},\"Activity\"),/*#__PURE__*/React.createElement(\"div\",{className:\"adventure-detail-info-description\"},activity),/*#__PURE__*/React.createElement(\"div\",{className:\"adventure-detail-info-label\"},\"Type\"),/*#__PURE__*/React.createElement(\"div\",{className:\"adventure-detail-info-description\"},adventureType),/*#__PURE__*/React.createElement(\"div\",{className:\"adventure-detail-info-label\"},\"Trip Length\"),/*#__PURE__*/React.createElement(\"div\",{className:\"adventure-detail-info-description\"},tripLength),/*#__PURE__*/React.createElement(\"div\",{className:\"adventure-detail-info-label\"},\"Group Size\"),/*#__PURE__*/React.createElement(\"div\",{className:\"adventure-detail-info-description\"},groupSize),/*#__PURE__*/React.createElement(\"div\",{className:\"adventure-detail-info-label\"},\"Difficulty\"),/*#__PURE__*/React.createElement(\"div\",{className:\"adventure-detail-info-description\"},difficulty),/*#__PURE__*/React.createElement(\"div\",{className:\"adventure-detail-info-label\"},\"Price\"),/*#__PURE__*/React.createElement(\"div\",{className:\"adventure-detail-info-description\"},/*#__PURE__*/React.createElement(CurrencyFormat,{value:price,displayType:'text',thousandSeparator:true,prefix:'$'}))),/*#__PURE__*/React.createElement(\"div\",{className:\"adventure-detail-content\"},/*#__PURE__*/React.createElement(\"img\",{className:\"adventure-detail-primaryimage\",src:primaryImage._path,alt:title}),/*#__PURE__*/React.createElement(\"div\",{dangerouslySetInnerHTML:{__html:description.html}}),/*#__PURE__*/React.createElement(AEMResponsiveGrid,{pagePath:\"/content/foxtelremotespademo/us/en/home/adventure/\".concat(adventureName),itemPath:\"root/responsivegrid\"}),/*#__PURE__*/React.createElement(\"h2\",null,\"Itinerary\"),/*#__PURE__*/React.createElement(\"hr\",null),/*#__PURE__*/React.createElement(\"div\",{className:\"adventure-detail-itinerary\",dangerouslySetInnerHTML:{__html:itinerary.html}})));}function NoAdventureFound(){return/*#__PURE__*/React.createElement(\"div\",{className:\"adventure-detail\"},/*#__PURE__*/React.createElement(Link,{className:\"adventure-detail-close-button\",to:\"/\"},/*#__PURE__*/React.createElement(\"img\",{className:\"Backbutton-icon\",src:REACT_APP_PUBLIC_URI+'/'+backIcon,alt:\"Return\"})),/*#__PURE__*/React.createElement(Error,{errorMessage:\"Missing data, adventure could not be rendered.\"}));}/**\r\n * Helper function to get the first adventure from the response\r\n * @param {*} response \r\n */function getAdventure(response){if(response&&response.data&&response.data.adventureByPath&&response.data.adventureByPath.item){return response.data.adventureByPath.item;}return undefined;}export default AdventureDetail;","map":{"version":3,"names":["React","useEffect","useState","Link","useLocation","useHistory","CurrencyFormat","Error","Loading","mapJsonRichText","getAdventureByPath","AEMResponsiveGrid","REACT_APP_PUBLIC_URI","process","env","AdventureDetail","location","contentFragmentPath","pathname","substring","length","history","response","setResponse","then","errors","currentAdventure","getAdventure","AdventureDetailRender","_path","title","primaryImage","activity","adventureType","tripLength","groupSize","difficulty","price","description","itinerary","contributor","adventureName","split","pop","goBack","backIcon","__html","html","NoAdventureFound","data","adventureByPath","item","undefined"],"sources":["C:/sarang/code/spa/remote-spa-published/sarakulkAUS.github.io/src/components/AdventureDetail.js"],"sourcesContent":["/*\r\nCopyright 2022 Adobe\r\nAll Rights Reserved.\r\n\r\nNOTICE: Adobe permits you to use, modify, and distribute this file in\r\naccordance with the terms of the Adobe license agreement accompanying\r\nit.\r\n*/\r\nimport React, { useEffect, useState } from 'react';\r\nimport { Link, useLocation, useHistory } from \"react-router-dom\";\r\nimport CurrencyFormat from 'react-currency-format';\r\nimport backIcon from '../images/icon-close.svg';\r\nimport Error from './Error';\r\nimport Loading from './Loading';\r\nimport { mapJsonRichText } from '../utils/renderRichText';\r\nimport './AdventureDetail.scss';\r\nimport { getAdventureByPath } from '../api/persistedQueries';\r\nimport AEMResponsiveGrid from './aem/AEMResponsiveGrid';\r\n\r\nconst { REACT_APP_PUBLIC_URI } = process.env;\r\n\r\nfunction AdventureDetail() {\r\n\r\n    const location = useLocation();\r\n\r\n    //parse the content fragment from the url location\r\n    const contentFragmentPath = location.pathname.substring(`/adventure:`.length);\r\n\r\n    // useHistory as react-router-dom is still on old version to avoid conflict with aem-core-components-react-XX upstream dependencies\r\n    const history = useHistory();\r\n    const [response, setResponse] = useState();\r\n\r\n    useEffect(() => {\r\n        // set response to null on change\r\n        setResponse();\r\n\r\n        // execute persisted query based on the adventure slug\r\n        getAdventureByPath(contentFragmentPath)\r\n            .then(response => setResponse(response));\r\n    }, [contentFragmentPath]);\r\n\r\n\r\n    //If query response is null then return a loading icon...\r\n    if (!response) return <Loading />;\r\n\r\n    //If there is an error with the GraphQL query\r\n    if (response && response.errors) return <Error errorMessage={response.errors} />;\r\n\r\n    //Set adventure properties variable based on graphQL response\r\n    const currentAdventure = getAdventure(response);\r\n\r\n    //Must have title, path, and image\r\n    if (!currentAdventure) {\r\n        return <NoAdventureFound />;\r\n    }\r\n\r\n    return (\r\n        <AdventureDetailRender {...currentAdventure}  history={history}/>\r\n    );\r\n}\r\n\r\nfunction AdventureDetailRender({ _path,\r\n    title,\r\n    primaryImage,\r\n    activity,\r\n    adventureType,\r\n    tripLength,\r\n    groupSize,\r\n    difficulty,\r\n    price,\r\n    description,\r\n    itinerary,\r\n    contributor, history }) {\r\n\r\n\r\n    // Get the last segment of the Adventure Content Fragment path to used to generate the pagePath for the AEMResponsiveGrid\r\n    const adventureName = _path.split('/').pop();\r\n    return (<div className=\"adventure-detail\">\r\n        <button className=\"adventure-detail-close-button\" onClick={() => history.goBack()}>\r\n            <img className=\"Backbutton-icon\" src={REACT_APP_PUBLIC_URI + '/' + backIcon} alt=\"Return\" />\r\n        </button>\r\n        <h1 className=\"adventure-detail-title\">{title}</h1>\r\n        <div className=\"adventure-detail-info\">\r\n            <div className=\"adventure-detail-info-label\">Activity</div>\r\n            <div className=\"adventure-detail-info-description\">{activity}</div>\r\n            <div className=\"adventure-detail-info-label\">Type</div>\r\n            <div className=\"adventure-detail-info-description\">{adventureType}</div>\r\n            <div className=\"adventure-detail-info-label\">Trip Length</div>\r\n            <div className=\"adventure-detail-info-description\">{tripLength}</div>\r\n            <div className=\"adventure-detail-info-label\">Group Size</div>\r\n            <div className=\"adventure-detail-info-description\">{groupSize}</div>\r\n            <div className=\"adventure-detail-info-label\">Difficulty</div>\r\n            <div className=\"adventure-detail-info-description\">{difficulty}</div>\r\n            <div className=\"adventure-detail-info-label\">Price</div>\r\n            <div className=\"adventure-detail-info-description\">\r\n                <CurrencyFormat value={price} displayType={'text'} thousandSeparator={true} prefix={'$'} />\r\n            </div>\r\n        </div>\r\n        <div className=\"adventure-detail-content\">\r\n            <img className=\"adventure-detail-primaryimage\"\r\n                src={primaryImage._path} alt={title} />\r\n            <div dangerouslySetInnerHTML={{ __html: description.html }}></div>\r\n\r\n            <AEMResponsiveGrid\r\n                pagePath={`/content/foxtelremotespademo/us/en/home/adventure/${adventureName}`}\r\n                itemPath=\"root/responsivegrid\" />\r\n\r\n            <h2>Itinerary</h2>\r\n            <hr />\r\n\r\n            <div className=\"adventure-detail-itinerary\"\r\n                dangerouslySetInnerHTML={{ __html: itinerary.html }}></div>\r\n        </div>\r\n    </div>\r\n    );\r\n\r\n}\r\n\r\nfunction NoAdventureFound() {\r\n    return (\r\n        <div className=\"adventure-detail\">\r\n            <Link className=\"adventure-detail-close-button\" to={\"/\"}>\r\n                <img className=\"Backbutton-icon\" src={REACT_APP_PUBLIC_URI + '/' + backIcon} alt=\"Return\" />\r\n            </Link>\r\n            <Error errorMessage=\"Missing data, adventure could not be rendered.\" />\r\n        </div>\r\n    );\r\n}\r\n\r\n/**\r\n * Helper function to get the first adventure from the response\r\n * @param {*} response \r\n */\r\nfunction getAdventure(response) {\r\n\r\n    if (response && response.data && response.data.adventureByPath && response.data.adventureByPath.item) {\r\n        return response.data.adventureByPath.item;\r\n    }\r\n    return undefined;\r\n}\r\n\r\nexport default AdventureDetail;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}